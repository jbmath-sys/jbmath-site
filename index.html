<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>JBMath ‚Ä¢ Videos</title>
  <meta name="description" content="Repositorio de videos del canal JBMath por categor√≠as.">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{
      background: radial-gradient(1200px 600px at 80% -10%, #1c295f 0%, transparent 60%), #0b1020;
      color:#eaf0ff;
    }
    .glass{ backdrop-filter: blur(8px) }
  </style>
</head>
<body class="min-h-screen">
  <header class="sticky top-0 z-20 bg-[rgba(11,16,32,.92)] glass border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
      <a href="#/" class="flex items-center gap-3 font-extrabold tracking-tight">
        <div class="w-9 h-9 rounded-xl grid place-items-center bg-gradient-to-br from-sky-400 to-indigo-400">üìê</div>
        <div>
          <div class="text-lg">JBMath ‚Ä¢ Biblioteca de Videos</div>
          <div class="text-sm text-muted">R√°pido, claro y sin rodeos üòâ</div>
        </div>
      </a>
      <div class="flex items-center gap-2">
        <input id="search" class="w-[60vw] max-w-md rounded-xl border border-white/10 bg-[#0f1734] px-3 py-2 outline-none" placeholder="Buscar por t√≠tulo‚Ä¶"/>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <div id="app"></div>
  </main>

  <footer class="max-w-6xl mx-auto px-4 pb-12 text-center text-sm text-gray-400">
    Publica en <b>GitHub Pages</b> y comparte tus clases. Hecho con ‚ù§Ô∏è y una pizca de trigonometr√≠a.
  </footer>

  <script type="module">
    import React, { useEffect, useMemo, useState } from 'https://esm.sh/react@18';
    import { createRoot } from 'https://esm.sh/react-dom@18/client';

    const SAMPLE = [
      {"id":"cCNO_vbWUac","title":"Probabilidad Clasica","category":"Estad√≠stica"},
      {"id":"fJ9rUzIMcZQ","title":"Tablas de frecuencia en 10 minutos","category":"Estad√≠stica"},
      {"id":"OPf0YbXqDm0","title":"Probabilidad cl√°sica: ejercicios r√°pidos","category":"Estad√≠stica"},
      {"id":"9bZkp7q19f0","title":"Seno, coseno y tangente desde cero","category":"Trigonometr√≠a"},
      {"id":"pRpeEdMmmQ0","title":"Identidades trigonom√©tricas esenciales","category":"Trigonometr√≠a"},
      {"id":"6_b7RDuLwcI","title":"√Ångulo de elevaci√≥n y depresi√≥n (aplicaciones)","category":"Trigonometr√≠a"},
      {"id":"3JZ_D3ELwOQ","title":"√Åreas y per√≠metros: figuras compuestas","category":"Geometr√≠a"},
      {"id":"ktvTqknDobU","title":"Teorema de Pit√°goras con problemas","category":"Geometr√≠a"},
      {"id":"hY7m5jjJ9mM","title":"Geometr√≠a anal√≠tica: distancia y punto medio","category":"Geometr√≠a"},
      {"id":"tVj0ZTS4WF4","title":"Divisibilidad y factorizaci√≥n expr√©s","category":"Aritm√©tica"},
      {"id":"CevxZvSJLk8","title":"Proporciones y reglas de tres","category":"Aritm√©tica"},
      {"id":"kXYiU_JCYtU","title":"Aritm√©tica mental: trucos con potencias","category":"Aritm√©tica"},
      {"id":"L_jWHffIx5E","title":"Razonamiento con conteos y caminos","category":"Razonamiento matem√°tico"},
      {"id":"eVTXPUF4Oz4","title":"Tableros y combinatoria b√°sica","category":"Razonamiento matem√°tico"},
      {"id":"uelHwf8o7_U","title":"Paradojas y falacias comunes","category":"Razonamiento matem√°tico"},
      {"id":"C-u5WLJ9Yk4","title":"Factor com√∫n en 30 segundos","category":"Trucos"},
      {"id":"dvgZkm1xWPE","title":"Derivar en la cabeza: reglas r√°pidas","category":"Trucos"},
      {"id":"hTWKbfoikeg","title":"Fracciones: sumas veloces","category":"Trucos"}
    ];

    const slug = s => s.toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu,'').replace(/[^a-z0-9]+/g,'-');

    function Card({ v }) {
      return (
        <article className="bg-[#111a3a] rounded-2xl border border-white/10 overflow-hidden">
          <div className="relative aspect-video">
            <img src={`https://i.ytimg.com/vi/${v.id}/hqdefault.jpg`} alt={v.title} className="w-full h-full object-cover"/>
            <div className="absolute top-2 left-2 bg-black/60 px-2 py-1 rounded text-xs">{v.category}</div>
          </div>
          <div className="p-3">
            <div className="font-bold">{v.title}</div>
            <div className="mt-2 flex gap-2">
              <a target="_blank" rel="noopener" href={`https://www.youtube.com/watch?v=${v.id}`} className="px-3 py-1 rounded bg-blue-600">‚ñ∂ Ver</a>
            </div>
          </div>
        </article>
      );
    }

    function App(){
      const [all, setAll] = useState([]);
      const [loading, setLoading] = useState(true);
      const [fallback, setFallback] = useState(false);
      const [term, setTerm] = useState('');

      useEffect(()=>{
        (async ()=>{
          try {
            const r = await fetch('./videos.json', {cache:'no-store'});
            if(!r.ok) throw new Error('HTTP ' + r.status);
            const data = await r.json();
            setAll(Array.isArray(data) ? data : []);
          } catch(e){
            console.warn('No se pudo cargar videos.json, uso SAMPLE', e);
            setAll(SAMPLE);
            setFallback(true);
          } finally {
            setLoading(false);
          }
        })();
      },[]);

      const filtered = useMemo(()=>{
        const t = term.trim().toLowerCase();
        return t ? all.filter(v=>v.title.toLowerCase().includes(t)) : all;
      },[all, term]);

      if(loading) return <div>Cargando‚Ä¶</div>;

      return (
        <>
          {fallback && (
            <div className="mb-4 text-sm bg-yellow-500/20 border border-yellow-500/30 text-yellow-200 rounded-xl px-3 py-2">
              Aviso: no se pudo cargar <code>videos.json</code>. Mostrando copia de respaldo.
            </div>
          )}
          <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            {filtered.map(v => <Card key={v.id} v={v}/>)}
          </div>
        </>
      );
    }

    const root = createRoot(document.getElementById('app'));
    root.render(<App/>);

    document.getElementById('search').addEventListener('input', e=>{
      root.render(<App/>);
    });
  </script>
</body>
</html>
